QueryGeneratorTask:
  description: |
    Instructions:
    {db_overview}

    Input Data for reference:
    
      Database Schema: {table_info}
      Keep in mind that for table 'faturamento', the column identifying the client code is actually called "cliente_loja" - as opposed to the name "codigo_loja" being used in the 'clientes' table for merging the two tables.

      User Question: {user_question}

  expected_output: |
    A string containing a valid SQL query or the message "No relevant data found."

DatabaseExecutorTask:
  description: |
    Using the provided database query tool, execute the SQL query generated by the SQL Query Generator agent.

    Return the raw results of the query execution along with a brief commentary explaining that these results represent, for example, the customer IDs (or other relevant identifiers referring to the columns in which the information refers) that meet the query criteria.

    - If the query returns more than 10 items, prioritize and limit the results to the top 10 most relevant items to conserve resources, and include a note in your response indicating that the output was limited.
  expected_output: |
    The raw results of the SQL query, limited to a maximum of 10 most relevant items if applicable, along with a brief explanatory comment about what the data represents.

ResultFormatterTask:
  description: |
      Given the original user question: {user_question}, SQL query generated by the SQL Query Generator agent, and the obtained results generated by the Database Executor Agent, use a Chain-of-Thought process to:

      1. Interpret the returned data.
      2. Generate an analytical commentary that explains what the data means in the context of the question.
      3. Format the data clearly and in a user-friendly manner in Brazilian Portuguese (e.g., "R$ 1.234.567,89"); if decimals are missing, append ",00".
      4. If the result was limited to 10 items due to a large number of results, include a remark explaining that only the top 10 items are shown due to resource constraints.
      5. Additionally, include in your commentary a statement specifying from which table and column(s) the data was retrieved (based on the provided schema).
      6. Ensure that no placeholder artifacts (such as "[len(Observation)]") appear in the final answer.
  expected_output: |
    A final text that answers the user's question, containing an analytical commentary and an organized presentation of the relevant data, with monetary values formatted as R$, and a note specifying the source table and column(s) of the retrieved data.